<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flowwy | Premium Focus & Study</title>
    <link rel="icon" type="image/png" href="img/logo.png" />

    <meta
      name="description"
      content="Flowwy is a premium, distraction-free study timer and task manager featuring Pomodoro techniques, Lofi music integration, and PWA offline capabilities. Hosted at https://flowwy.netlify.app/"
    />
    <meta
      name="keywords"
      content="Flowwy, study timer, pomodoro, task manager, lofi music, focus app, productivity tool, web app pwa, khushaank gupta"
    />
    <meta name="author" content="Khushaank Gupta" />
    <meta name="robots" content="index, follow" />

    <!-- Security -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://www.youtube.com https://s.ytimg.com https://i.ytimg.com https://khushaankgupta.qzz.io; script-src 'self' 'unsafe-inline' https://www.youtube.com https://s.ytimg.com https://www.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; img-src 'self' data: https:;"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://flowwy.netlify.app/" />
    <meta property="og:title" content="Flowwy | Premium Focus & Study" />
    <meta
      property="og:description"
      content="Master your time with Flowwy. A beautiful, minimalist study tool with built-in Lofi, tasks, and gamification by Khushaank Gupta."
    />
    <meta property="og:image" content="img/preview-desktop.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://flowwy.netlify.app/" />
    <meta property="twitter:title" content="Flowwy | Premium Focus & Study" />
    <meta
      property="twitter:description"
      content="Master your time with Flowwy. A beautiful, minimalist study tool with built-in Lofi, tasks, and gamification by Khushaank Gupta."
    />
    <meta property="twitter:image" content="img/preview-desktop.png" />
    <meta property="twitter:creator" content="@Khushaankgupta" />
    <meta property="og:site_name" content="Flowwy" />
    <meta name="application-name" content="Flowwy" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <link rel="stylesheet" href="styles.css?v=1.5" />
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Flowwy",
        "url": "https://flowwy.netlify.app/",
        "description": "Premium distraction-free study timer with Lofi music, Pomodoro technique, and task management.",
        "author": {
          "@type": "Person",
          "name": "Khushaank Gupta"
        },
        "applicationCategory": "Productivity",
        "operatingSystem": "All",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      }
    </script>
  </head>
  <body oncontextmenu="return false;">
    <!-- Background Video -->

    <!-- PWA Install Button (Hidden by default) -->
    <button
      id="install-btn"
      class="glass-card"
      style="
        display: none;
        position: fixed;
        top: 2rem;
        right: 10rem;
        z-index: 100;
        padding: 10px 20px;
        border: none;
        cursor: pointer;
      "
    >
      <i class="fa-solid fa-download"></i> Install App
    </button>
    <!-- Logo Svg (Tree) -->
    <div class="app-logo" title="Flowwy">
      <img
        src="img/logo.png"
        alt="Flowwy Logo"
        style="width: 100%; height: 100%; object-fit: contain"
      />
    </div>

    <!-- Backgrounds -->
    <div class="background-mesh"></div>
    <div class="background-video-container">
      <div id="video-background-player"></div>
      <div class="background-video-overlay"></div>
    </div>

    <!-- Zen Mode Exit Overlay (Hidden default) -->
    <div class="zen-exit-overlay" id="zen-overlay">
      <button class="zen-btn-overlay" id="zen-exit-btn" title="Exit Zen Mode">
        <i class="fa-solid fa-eye"></i>
      </button>
    </div>

    <!-- Main Central Focus Area -->
    <main class="focus-center">
      <!-- Timer Widget -->
      <div class="timer-widget">
        <svg
          class="progress-ring"
          viewBox="0 0 320 320"
          width="320"
          height="320"
        >
          <circle
            class="progress-ring__circle"
            stroke="white"
            stroke-width="8"
            fill="transparent"
            r="140"
            cx="160"
            cy="160"
          />
        </svg>
        <div class="timer-content">
          <div class="time-text">25:00</div>
          <div class="timer-label">FOCUS</div>
        </div>

        <div class="timer-controls">
          <button class="control-btn secondary" id="reset-btn" title="Reset">
            <i class="fa-solid fa-rotate-left"></i>
          </button>
          <button
            class="control-btn primary"
            id="toggle-timer-btn"
            title="Start/Pause"
          >
            <i class="fa-solid fa-play"></i>
          </button>
          <button
            class="control-btn secondary"
            id="switch-mode-btn"
            title="Switch Mode"
          >
            <i class="fa-solid fa-shuffle"></i>
          </button>
        </div>
      </div>

      <!-- Music Mini-Player -->
      <div class="music-mini">
        <div class="music-info">
          <div class="scrolling-text">
            <span id="current-track-name">Loading...</span>
          </div>
          <!-- Audio Visualizer -->
          <div class="audio-visuals">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
          </div>
        </div>
        <div class="music-controls">
          <button class="music-btn" id="prev-track">
            <i class="fa-solid fa-backward-step"></i>
          </button>
          <button class="music-btn play" id="music-toggle">
            <i class="fa-solid fa-play"></i>
          </button>
          <button class="music-btn" id="next-track">
            <i class="fa-solid fa-forward-step"></i>
          </button>
          <button class="music-btn" id="visual-btn" title="Toggle Visuals">
            <i class="fa-solid fa-video"></i>
          </button>
        </div>
      </div>
    </main>

    <!-- Custom Loading Screen -->
    <div id="loading-screen">
      <div class="loader-content">
        <img src="img/logo.png" alt="Loading..." class="pulse-logo" />
        <div class="loader-bar">
          <div class="loader-fill"></div>
        </div>
      </div>
    </div>

    <!-- Circular Floating Menu (Settings) - Moved to Top Right -->
    <button
      class="settings-floating-btn"
      id="settings-trigger-btn"
      title="Settings"
    >
      <i class="fa-solid fa-gear"></i>
    </button>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
      <div class="modal-overlay-click"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button class="close-modal" id="close-settings">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="setting-group">
          <label>Pomodoro (mins)</label>
          <input type="number" id="setting-pomo" value="25" />
        </div>
        <div class="setting-group">
          <label>Short Break (mins)</label>
          <input type="number" id="setting-short" value="5" />
        </div>
        <div class="setting-group">
          <label>Long Break (mins)</label>
          <input type="number" id="setting-long" value="15" />
        </div>
        <div
          class="setting-group"
          style="
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
          "
        >
          <label>Auto-start Breaks?</label>
          <input type="checkbox" id="setting-autostart" style="width: auto" />
        </div>
        <div
          class="setting-group"
          style="
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
          "
        >
          <label>Link Music to Timer?</label>
          <input type="checkbox" id="setting-musiclink" style="width: auto" />
        </div>
        <button class="save-btn" id="save-settings">Save Changes</button>
        <p
          id="settings-saved-msg"
          style="
            color: #4ade80;
            font-size: 0.9rem;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            text-align: center;
          "
        >
          Settings Saved!
        </p>
      </div>
    </div>
    <!-- Help / Shortcuts Modal -->
    <div class="modal" id="help-modal">
      <div class="modal-overlay-click"></div>
      <div class="modal-content" style="max-width: 500px">
        <div class="modal-header">
          <h2>Keyboard Shortcuts</h2>
          <button class="close-modal" id="close-help-btn">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="shortcuts-grid">
          <div class="shortcut-item">
            <span class="keys"><kbd>Ctrl</kbd> + <kbd>?</kbd></span>
            <span class="action">Show Help</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Shift</kbd> + <kbd>S</kbd></span>
            <span class="action">Settings</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Z</kbd></span>
            <span class="action">Zen Mode</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Ctrl</kbd> + <kbd>F</kbd></span>
            <span class="action">Fullscreen</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Space</kbd></span>
            <span class="action">Start/Pause Timer</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Shift</kbd> + <kbd>R</kbd></span>
            <span class="action">Reset Timer</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Shift</kbd> + <kbd>P</kbd></span>
            <span class="action">Pomodoro Focus</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Shift</kbd> + <kbd>B</kbd></span>
            <span class="action">Short Break</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>Shift</kbd> + <kbd>L</kbd></span>
            <span class="action">Long Break</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>K</kbd></span>
            <span class="action">Play/Pause Music</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>&gt;</kbd> / <kbd>&lt;</kbd></span>
            <span class="action">Next / Prev Song</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>M</kbd></span>
            <span class="action">Mute/Unmute</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>J</kbd> / <kbd>L</kbd></span>
            <span class="action">-10s / +10s Music</span>
          </div>
          <div class="shortcut-item">
            <span class="keys"><kbd>V</kbd></span>
            <span class="action">Toggle Video</span>
          </div>

          <div class="shortcut-item">
            <span class="keys"><kbd>Esc</kbd></span>
            <span class="action">Close / Exit</span>
          </div>
        </div>
      </div>
    </div>
    <!-- Security & PWA -->

    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#0a0a0f" />

    <!-- Footer Links -->
    <div class="footer-links">
      <div style="margin-bottom: 0.5rem">
        <a
          href="privacy.html"
          target="_blank"
          style="color: white; text-decoration: none"
          >Privacy</a
        >
      </div>
      <div
        class="social-links"
        style="
          margin-top: 0.2rem;
          justify-content: flex-start;
          gap: 0.8rem;
          font-size: 1rem;
        "
      >
        <a
          href="https://instagram.com/khushaankgupta"
          target="_blank"
          class="social-btn"
          title="Instagram"
          ><i class="fa-brands fa-instagram"></i
        ></a>
        <a
          href="https://github.com/khushaank"
          target="_blank"
          class="social-btn"
          title="GitHub"
          ><i class="fa-brands fa-github"></i
        ></a>
        <a
          href="https://linkedin.com/in/khushaank"
          target="_blank"
          class="social-btn"
          title="LinkedIn"
          ><i class="fa-brands fa-linkedin"></i
        ></a>
        <a
          href="https://x.com/Khushaankgupta"
          target="_blank"
          class="social-btn"
          title="X (Twitter)"
          ><i class="fa-brands fa-x-twitter"></i
        ></a>
        <a
          href="https://youtube.com/@khushaankgupta"
          target="_blank"
          class="social-btn"
          title="YouTube"
          ><i class="fa-brands fa-youtube"></i
        ></a>
        <a
          href="https://khushaankgupta.qzz.io"
          target="_blank"
          class="social-btn"
          title="Website"
          ><i class="fa-solid fa-globe"></i
        ></a>
      </div>
      <div style="margin-top: 0.5rem; font-size: 0.75rem">
        &copy; <span id="year-span">2026</span> Flowwy. All rights reserved.
      </div>
    </div>

    <script src="script.js?v=1.5"></script>
    <script>
      // PWA Registration
      // PWA Registration
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("./sw.js")
            .then((reg) => console.log("SW registered!", reg))
            .catch((err) => console.log("SW failed", err));
        });
      }

      // Protective Scripts
      document.onkeydown = function (e) {
        if (e.keyCode == 123) {
          // F12
          return false;
        }
        if (e.ctrlKey && e.shiftKey && e.keyCode == "I".charCodeAt(0)) {
          // Ctrl+Shift+I
          return false;
        }
        if (e.ctrlKey && e.shiftKey && e.keyCode == "J".charCodeAt(0)) {
          // Ctrl+Shift+J
          return false;
        }
        if (e.ctrlKey && e.keyCode == "U".charCodeAt(0)) {
          // Ctrl+U
          return false;
        }
        if (e.ctrlKey && e.shiftKey && e.keyCode == "C".charCodeAt(0)) {
          // Ctrl+Shift+C
          return false;
        }
      };

      // Modal Click Outside
      document.querySelectorAll(".modal-overlay-click").forEach((overlay) => {
        overlay.addEventListener("click", function () {
          this.closest(".modal").classList.remove("active");
        });
      });

      // ESC to close modals
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          document
            .querySelectorAll(".modal.active")
            .forEach((m) => m.classList.remove("active"));
        }
      });
    </script>
  </body>
</html>
